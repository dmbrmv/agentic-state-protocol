{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "name": "test-runners",
  "description": "MCP configuration for Python test runner integrations",
  "version": "2.0.0",

  "servers": {
    "pytest": {
      "language": "python",
      "command": "pytest",
      "detection": [
        "pytest.ini",
        "pyproject.toml:[tool.pytest]",
        "conftest.py",
        "setup.cfg:[tool:pytest]"
      ],
      "capabilities": {
        "run": "pytest {scope} -v --tb=short",
        "runVerbose": "pytest {scope} -vv --tb=long",
        "runFailed": "pytest --lf -v",
        "runChanged": "pytest --co -q | head -50",
        "coverage": "pytest --cov={package} --cov-report=term-missing {scope}",
        "watch": "pytest-watch -- -v",
        "markers": "pytest --markers",
        "collect": "pytest --collect-only -q"
      },
      "outputParsing": {
        "passPattern": "\\d+ passed",
        "failPattern": "FAILED|ERROR",
        "skipPattern": "\\d+ skipped",
        "summaryPattern": "=+ (\\d+) passed.*=+",
        "coveragePattern": "TOTAL\\s+\\d+\\s+\\d+\\s+(\\d+)%"
      },
      "defaultArgs": ["-v", "--tb=short"],
      "timeoutSeconds": 300
    },

    "unittest": {
      "language": "python",
      "command": "python -m unittest",
      "detection": [
        "tests/test_*.py",
        "tests/*_test.py"
      ],
      "capabilities": {
        "run": "python -m unittest discover -s {scope} -v",
        "runSingle": "python -m unittest {scope} -v",
        "runQuiet": "python -m unittest discover -s tests"
      },
      "outputParsing": {
        "passPattern": "OK",
        "failPattern": "FAILED|ERROR",
        "summaryPattern": "Ran (\\d+) tests?"
      },
      "defaultArgs": ["-v"],
      "timeoutSeconds": 300
    },

    "make-test": {
      "language": "generic",
      "command": "make test",
      "detection": ["Makefile:test"],
      "capabilities": {
        "run": "make test",
        "runVerbose": "make test VERBOSE=1"
      },
      "outputParsing": {
        "passPattern": "PASS|OK|Success",
        "failPattern": "FAIL|ERROR|Failed"
      },
      "timeoutSeconds": 600
    }
  },

  "autoDetection": {
    "enabled": true,
    "priority": ["pytest", "unittest", "make-test"],
    "fallbackCommand": null
  },

  "globalSettings": {
    "defaultTimeout": 300,
    "maxRetries": 2,
    "captureOutput": true,
    "failFast": false
  }
}
